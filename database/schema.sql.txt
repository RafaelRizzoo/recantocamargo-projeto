CREATE DATABASE IF NOT EXISTS recanto_camargo
  CHARACTER SET utf8mb4
  COLLATE utf8mb4_unicode_ci;

USE recanto_camargo;

CREATE TABLE IF NOT EXISTS usuarios (
  id INT AUTO_INCREMENT PRIMARY KEY,
  nome VARCHAR(120) NOT NULL,
  email VARCHAR(190) NOT NULL UNIQUE,
  senha_hash VARCHAR(255) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS reservas (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id INT NOT NULL,
  nome VARCHAR(120) NOT NULL,
  whatsapp VARCHAR(20) NOT NULL,
  checkin DATE NOT NULL,
  checkout DATE NOT NULL,
  hospedes INT NOT NULL,
  observacoes VARCHAR(255) NULL,
  status ENUM('pendente','confirmada','cancelada') NOT NULL DEFAULT 'pendente',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  INDEX idx_reservas_user_id (user_id),
  CONSTRAINT fk_reservas_user
    FOREIGN KEY (user_id) REFERENCES usuarios(id)
    ON DELETE CASCADE
    ON UPDATE CASCADE
) ENGINE=InnoDB;
